"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/intercom/create-signature";
exports.ids = ["pages/api/intercom/create-signature"];
exports.modules = {

/***/ "micro":
/*!************************!*\
  !*** external "micro" ***!
  \************************/
/***/ ((module) => {

module.exports = require("micro");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "(api)/./pages/api/intercom/create-signature.js":
/*!************************************************!*\
  !*** ./pages/api/intercom/create-signature.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"config\": () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var micro__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! micro */ \"micro\");\n/* harmony import */ var micro__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(micro__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _utils_intercom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/utils/intercom */ \"(api)/./utils/intercom.js\");\n\n\nconst config = {\n    api: {\n        bodyParser: false\n    }\n};\nconst handler = async (req, res)=>{\n    const { userId  } = req.query;\n    if (req.method === \"GET\") {\n        try {\n            const data = (0,_utils_intercom__WEBPACK_IMPORTED_MODULE_1__.createIntercomSignature)(userId);\n            console.log(data);\n            res.status(200).json(data);\n        } catch (error) {\n            res.status(500).json({\n                error: error,\n                message: error.message\n            });\n        }\n    } else {\n        res.setHeader(\"Allow\", \"GET\");\n        res.status(405).end(\"Method Not Allowed\");\n    }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (handler);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvaW50ZXJjb20vY3JlYXRlLXNpZ25hdHVyZS5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUEyQztBQUNnQjtBQUVwRCxNQUFNSSxNQUFNLEdBQUc7SUFDbEJDLEdBQUcsRUFBRTtRQUNIQyxVQUFVLEVBQUUsS0FBSztLQUNsQjtDQUNGLENBQUM7QUFFRixNQUFNQyxPQUFPLEdBQUcsT0FBT0MsR0FBRyxFQUFFQyxHQUFHLEdBQUs7SUFDbEMsTUFBTSxFQUFFQyxNQUFNLEdBQUUsR0FBR0YsR0FBRyxDQUFDRyxLQUFLO0lBQzVCLElBQUlILEdBQUcsQ0FBQ0ksTUFBTSxLQUFLLEtBQUssRUFBRTtRQUN0QixJQUFJO1lBQ0EsTUFBTUMsSUFBSSxHQUFHVix3RUFBdUIsQ0FBQ08sTUFBTSxDQUFDO1lBQzVDSSxPQUFPLENBQUNDLEdBQUcsQ0FBQ0YsSUFBSSxDQUFDLENBQUM7WUFDbEJKLEdBQUcsQ0FBQ08sTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDZCxJQUFJLENBQUNXLElBQUksQ0FBQztTQUM3QixDQUFDLE9BQU9JLEtBQUssRUFBRTtZQUNaUixHQUFHLENBQUNPLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ2QsSUFBSSxDQUFDO2dCQUFDZSxLQUFLLEVBQUVBLEtBQUs7Z0JBQUVDLE9BQU8sRUFBRUQsS0FBSyxDQUFDQyxPQUFPO2FBQUMsQ0FBQztTQUMvRDtLQUNKLE1BQU07UUFDTFQsR0FBRyxDQUFDVSxTQUFTLENBQUMsT0FBTyxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBQzlCVixHQUFHLENBQUNPLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0ksR0FBRyxDQUFDLG9CQUFvQixDQUFDLENBQUM7S0FDM0M7Q0FDRjtBQUVELGlFQUFlYixPQUFPLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oYW1sZXQvLi9wYWdlcy9hcGkvaW50ZXJjb20vY3JlYXRlLXNpZ25hdHVyZS5qcz8xM2JlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGJ1ZmZlciwgdGV4dCwganNvbiB9IGZyb20gXCJtaWNyb1wiO1xuaW1wb3J0IHsgY3JlYXRlSW50ZXJjb21TaWduYXR1cmUgfSBmcm9tIFwiQC91dGlscy9pbnRlcmNvbVwiO1xuXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xuICAgIGFwaToge1xuICAgICAgYm9keVBhcnNlcjogZmFsc2UsXG4gICAgfSxcbiAgfTtcbiAgXG4gIGNvbnN0IGhhbmRsZXIgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCB7IHVzZXJJZCB9ID0gcmVxLnF1ZXJ5XG4gICAgaWYgKHJlcS5tZXRob2QgPT09IFwiR0VUXCIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBjcmVhdGVJbnRlcmNvbVNpZ25hdHVyZSh1c2VySWQpXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKGRhdGEpXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7ZXJyb3I6IGVycm9yLCBtZXNzYWdlOiBlcnJvci5tZXNzYWdlfSlcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXMuc2V0SGVhZGVyKFwiQWxsb3dcIiwgXCJHRVRcIik7XG4gICAgICByZXMuc3RhdHVzKDQwNSkuZW5kKFwiTWV0aG9kIE5vdCBBbGxvd2VkXCIpO1xuICAgIH1cbiAgfTtcbiAgXG4gIGV4cG9ydCBkZWZhdWx0IGhhbmRsZXI7Il0sIm5hbWVzIjpbImJ1ZmZlciIsInRleHQiLCJqc29uIiwiY3JlYXRlSW50ZXJjb21TaWduYXR1cmUiLCJjb25maWciLCJhcGkiLCJib2R5UGFyc2VyIiwiaGFuZGxlciIsInJlcSIsInJlcyIsInVzZXJJZCIsInF1ZXJ5IiwibWV0aG9kIiwiZGF0YSIsImNvbnNvbGUiLCJsb2ciLCJzdGF0dXMiLCJlcnJvciIsIm1lc3NhZ2UiLCJzZXRIZWFkZXIiLCJlbmQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/intercom/create-signature.js\n");

/***/ }),

/***/ "(api)/./utils/api/request.js":
/*!******************************!*\
  !*** ./utils/api/request.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"get\": () => (/* binding */ get),\n/* harmony export */   \"post\": () => (/* binding */ post)\n/* harmony export */ });\nlet cache = {};\nconst request = (url, params = {}, method = \"GET\")=>{\n    let options = {\n        method,\n        headers: new Headers({\n            \"Accept\": \"application/json\",\n            \"Content-Type\": \"application/json\"\n        })\n    };\n    if (\"GET\" === method) {\n        url += \"?\" + new URLSearchParams(params).toString();\n    } else {\n        options.body = JSON.stringify(params);\n    }\n    const result = fetch(url, options).then((response)=>response.json());\n    return result;\n};\nconst get = (url, params)=>request(url, params, \"GET\");\nconst post = (url, params)=>request(url, params, \"POST\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi91dGlscy9hcGkvcmVxdWVzdC5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBLElBQUlBLEtBQUssR0FBRyxFQUFFO0FBQ2QsTUFBTUMsT0FBTyxHQUFHLENBQUNDLEdBQUcsRUFBRUMsTUFBTSxHQUFHLEVBQUUsRUFBRUMsTUFBTSxHQUFHLEtBQUssR0FBSztJQUVwRCxJQUFJQyxPQUFPLEdBQUc7UUFDWkQsTUFBTTtRQUNORSxPQUFPLEVBQUUsSUFBSUMsT0FBTyxDQUFDO1lBQ3JCLFFBQVEsRUFBRSxrQkFBa0I7WUFDNUIsY0FBYyxFQUFFLGtCQUFrQjtTQUNqQyxDQUFDO0tBQ0g7SUFDRCxJQUFJLEtBQUssS0FBS0gsTUFBTSxFQUFFO1FBQ3BCRixHQUFHLElBQUksR0FBRyxHQUFHLElBQUlNLGVBQWUsQ0FBQ0wsTUFBTSxDQUFDLENBQUNNLFFBQVEsRUFBRSxDQUFDO0tBQ3JELE1BQU07UUFDTEosT0FBTyxDQUFDSyxJQUFJLEdBQUdDLElBQUksQ0FBQ0MsU0FBUyxDQUFDVCxNQUFNLENBQUM7S0FDdEM7SUFFRCxNQUFNVSxNQUFNLEdBQUdDLEtBQUssQ0FBQ1osR0FBRyxFQUFFRyxPQUFPLENBQUMsQ0FBQ1UsSUFBSSxDQUFDLENBQUNDLFFBQVEsR0FDL0NBLFFBQVEsQ0FBQ0MsSUFBSSxFQUFFLENBQUM7SUFFbEIsT0FBT0osTUFBTSxDQUFDO0NBQ2Y7QUFFTSxNQUFNSyxHQUFHLEdBQUcsQ0FBQ2hCLEdBQUcsRUFBRUMsTUFBTSxHQUFLRixPQUFPLENBQUNDLEdBQUcsRUFBRUMsTUFBTSxFQUFFLEtBQUssQ0FBQyxDQUFDO0FBQ3pELE1BQU1nQixJQUFJLEdBQUcsQ0FBQ2pCLEdBQUcsRUFBRUMsTUFBTSxHQUFLRixPQUFPLENBQUNDLEdBQUcsRUFBRUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGFtbGV0Ly4vdXRpbHMvYXBpL3JlcXVlc3QuanM/YzI5NyJdLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgY2FjaGUgPSB7fTtcbmNvbnN0IHJlcXVlc3QgPSAodXJsLCBwYXJhbXMgPSB7fSwgbWV0aG9kID0gXCJHRVRcIikgPT4ge1xuXG4gIGxldCBvcHRpb25zID0ge1xuICAgIG1ldGhvZCxcbiAgICBoZWFkZXJzOiBuZXcgSGVhZGVycyh7IFxuICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJywgXG4gICAgfSksXG4gIH07XG4gIGlmIChcIkdFVFwiID09PSBtZXRob2QpIHtcbiAgICB1cmwgKz0gXCI/XCIgKyBuZXcgVVJMU2VhcmNoUGFyYW1zKHBhcmFtcykudG9TdHJpbmcoKTtcbiAgfSBlbHNlIHtcbiAgICBvcHRpb25zLmJvZHkgPSBKU09OLnN0cmluZ2lmeShwYXJhbXMpXG4gIH1cblxuICBjb25zdCByZXN1bHQgPSBmZXRjaCh1cmwsIG9wdGlvbnMpLnRoZW4oKHJlc3BvbnNlKSA9PlxuICAgIHJlc3BvbnNlLmpzb24oKSk7XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXQgPSAodXJsLCBwYXJhbXMpID0+IHJlcXVlc3QodXJsLCBwYXJhbXMsIFwiR0VUXCIpO1xuZXhwb3J0IGNvbnN0IHBvc3QgPSAodXJsLCBwYXJhbXMpID0+IHJlcXVlc3QodXJsLCBwYXJhbXMsIFwiUE9TVFwiKTtcbiJdLCJuYW1lcyI6WyJjYWNoZSIsInJlcXVlc3QiLCJ1cmwiLCJwYXJhbXMiLCJtZXRob2QiLCJvcHRpb25zIiwiaGVhZGVycyIsIkhlYWRlcnMiLCJVUkxTZWFyY2hQYXJhbXMiLCJ0b1N0cmluZyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwicmVzdWx0IiwiZmV0Y2giLCJ0aGVuIiwicmVzcG9uc2UiLCJqc29uIiwiZ2V0IiwicG9zdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./utils/api/request.js\n");

/***/ }),

/***/ "(api)/./utils/intercom.js":
/*!***************************!*\
  !*** ./utils/intercom.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createIntercomSignature\": () => (/* binding */ createIntercomSignature),\n/* harmony export */   \"getIntercomSignature\": () => (/* binding */ getIntercomSignature),\n/* harmony export */   \"updateIntercom\": () => (/* binding */ updateIntercom)\n/* harmony export */ });\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _utils_api_request__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/utils/api/request */ \"(api)/./utils/api/request.js\");\n\n\nconst secret = process.env.INTERCOM_SECRET;\nfunction createIntercomSignature(userId) {\n    // Calling createHmac method\n    const hash = crypto__WEBPACK_IMPORTED_MODULE_0___default().createHmac(\"sha256\", secret)// updating data\n    .update(userId)// Encoding to be used\n    .digest(\"hex\");\n    return hash;\n}\nasync function getIntercomSignature(request) {\n    return new Promise((resolve)=>{\n        (async ()=>{\n            try {\n                await (0,_utils_api_request__WEBPACK_IMPORTED_MODULE_1__.get)(\"/api/intercom/create-signature\", request).then((result)=>{\n                    const data = result;\n                    resolve(data);\n                });\n            } catch (error) {\n                console.log(\"API error: \", error);\n                resolve(error);\n            }\n        })();\n    });\n}\nasync function updateIntercom(user, profile, update) {\n    let userId = \"\";\n    let email = \"\";\n    let name = \"\";\n    return new Promise((resolve)=>{\n        (async ()=>{\n            try {\n                if (user) {\n                    userId = user.id;\n                    email = user.email;\n                    name = profile.first_name + \" \" + profile.last_name;\n                    const hash = await getIntercomSignature({\n                        userId: userId\n                    });\n                    console.log(\"hash: \", hash);\n                    console.log(\"userId:\", userId);\n                    console.log(\"userEmail:\", email);\n                    console.log(\"name\", name);\n                    update({\n                        userId: userId,\n                        email: email,\n                        name: name,\n                        userHash: hash\n                    });\n                } else {\n                    update();\n                }\n                console.log(\"intercom updated\");\n                resolve(\"intercom updated\");\n            } catch (error) {\n                console.log(\"error: \", error);\n                resolve(error);\n            }\n        })();\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YW1sZXQvLi91dGlscy9pbnRlcmNvbS5qcz85MDc5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjcnlwdG8gZnJvbSAnY3J5cHRvJ1xuaW1wb3J0IHsgZ2V0IH0gZnJvbSAnQC91dGlscy9hcGkvcmVxdWVzdCc7XG5cbmNvbnN0IHNlY3JldCA9IHByb2Nlc3MuZW52LklOVEVSQ09NX1NFQ1JFVFxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlSW50ZXJjb21TaWduYXR1cmUodXNlcklkKSB7XG4gICAgXG4gICAgLy8gQ2FsbGluZyBjcmVhdGVIbWFjIG1ldGhvZFxuICAgIGNvbnN0IGhhc2ggPSBjcnlwdG8uY3JlYXRlSG1hYygnc2hhMjU2Jywgc2VjcmV0KVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAvLyB1cGRhdGluZyBkYXRhXG4gICAgLnVwZGF0ZSh1c2VySWQpXG5cbiAgICAvLyBFbmNvZGluZyB0byBiZSB1c2VkXG4gICAgLmRpZ2VzdCgnaGV4Jyk7XG4gXG4gICAgcmV0dXJuIGhhc2hcblxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0SW50ZXJjb21TaWduYXR1cmUocmVxdWVzdCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIChhc3luYyAoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBnZXQoJy9hcGkvaW50ZXJjb20vY3JlYXRlLXNpZ25hdHVyZScsIHJlcXVlc3QpLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSByZXN1bHQ7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShkYXRhKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkFQSSBlcnJvcjogXCIsIGVycm9yKTtcbiAgICAgICAgICAgIHJlc29sdmUoZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9KSgpXG4gICAgfSlcbiAgfVxuXG4gIGV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVJbnRlcmNvbSh1c2VyLCBwcm9maWxlLCB1cGRhdGUpIHtcblxuICAgIGxldCB1c2VySWQgPSBcIlwiXG4gICAgbGV0IGVtYWlsID0gXCJcIlxuICAgIGxldCBuYW1lID0gXCJcIlxuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgKGFzeW5jICgpID0+IHtcbiAgICAgICAgdHJ5IHtcblxuICAgICAgICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgICAgICAgICB1c2VySWQgPSB1c2VyLmlkXG4gICAgICAgICAgICAgICAgZW1haWwgPSB1c2VyLmVtYWlsXG4gICAgICAgICAgICAgICAgbmFtZSA9IHByb2ZpbGUuZmlyc3RfbmFtZSArIFwiIFwiICsgcHJvZmlsZS5sYXN0X25hbWVcblxuICAgICAgICAgICAgICAgIGNvbnN0IGhhc2ggPSBhd2FpdCBnZXRJbnRlcmNvbVNpZ25hdHVyZSh7dXNlcklkOiB1c2VySWR9KTtcblxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiaGFzaDogXCIsIGhhc2gpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwidXNlcklkOlwiLCB1c2VySWQpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwidXNlckVtYWlsOlwiLCBlbWFpbCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJuYW1lXCIsIG5hbWUpO1xuXG4gICAgICAgICAgICAgICAgdXBkYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgdXNlcklkOiB1c2VySWQsXG4gICAgICAgICAgICAgICAgICAgIGVtYWlsOiBlbWFpbCwgXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHVzZXJIYXNoOiBoYXNoXG4gICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB1cGRhdGUoKSBcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnNvbGUubG9nKFwiaW50ZXJjb20gdXBkYXRlZFwiKTtcblxuICAgICAgICAgIHJlc29sdmUoXCJpbnRlcmNvbSB1cGRhdGVkXCIpXG5cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZXJyb3I6IFwiLCBlcnJvcik7XG4gICAgICAgICAgICByZXNvbHZlKGVycm9yKVxuICAgICAgICB9XG4gICAgICB9KSgpO1xuICAgIH0pXG59Il0sIm5hbWVzIjpbImNyeXB0byIsImdldCIsInNlY3JldCIsInByb2Nlc3MiLCJlbnYiLCJJTlRFUkNPTV9TRUNSRVQiLCJjcmVhdGVJbnRlcmNvbVNpZ25hdHVyZSIsInVzZXJJZCIsImhhc2giLCJjcmVhdGVIbWFjIiwidXBkYXRlIiwiZGlnZXN0IiwiZ2V0SW50ZXJjb21TaWduYXR1cmUiLCJyZXF1ZXN0IiwiUHJvbWlzZSIsInJlc29sdmUiLCJ0aGVuIiwicmVzdWx0IiwiZGF0YSIsImVycm9yIiwiY29uc29sZSIsImxvZyIsInVwZGF0ZUludGVyY29tIiwidXNlciIsInByb2ZpbGUiLCJlbWFpbCIsIm5hbWUiLCJpZCIsImZpcnN0X25hbWUiLCJsYXN0X25hbWUiLCJ1c2VySGFzaCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./utils/intercom.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./pages/api/intercom/create-signature.js"));
module.exports = __webpack_exports__;

})();