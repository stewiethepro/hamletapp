"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useMessageOptions = exports.getTimeAgo = void 0;

var _formatDistanceStrict = _interopRequireDefault(require("date-fns/formatDistanceStrict"));

var _constants = require("../../constants");

var getTimeAgo = function getTimeAgo(created) {
  return created && (0, _formatDistanceStrict["default"])(new Date(created).getTime(), Date.now(), {
    addSuffix: true,
    roundingMethod: "floor"
  });
};

exports.getTimeAgo = getTimeAgo;

var useMessageOptions = function useMessageOptions(_ref) {
  var _labels$markAsRead, _labels$markAsUnread;

  var labels = _ref.labels,
      markMessageRead = _ref.markMessageRead,
      markMessageUnread = _ref.markMessageUnread,
      messageId = _ref.messageId,
      readTrackingId = _ref.readTrackingId,
      showMarkAsRead = _ref.showMarkAsRead,
      showMarkAsUnread = _ref.showMarkAsUnread,
      unreadTrackingId = _ref.unreadTrackingId;
  return [showMarkAsRead && {
    label: (_labels$markAsRead = labels === null || labels === void 0 ? void 0 : labels.markAsRead) !== null && _labels$markAsRead !== void 0 ? _labels$markAsRead : _constants.MESSAGE_LABELS.MARK_AS_READ,
    onClick: function onClick() {
      markMessageRead(messageId, readTrackingId || "");
    }
  }, showMarkAsUnread && {
    label: (_labels$markAsUnread = labels === null || labels === void 0 ? void 0 : labels.markAsUnread) !== null && _labels$markAsUnread !== void 0 ? _labels$markAsUnread : _constants.MESSAGE_LABELS.MARK_AS_UNREAD,
    onClick: function onClick() {
      markMessageUnread(messageId, unreadTrackingId || "");
    }
  }].filter(Boolean);
};

exports.useMessageOptions = useMessageOptions;